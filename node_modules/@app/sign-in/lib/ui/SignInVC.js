import React from "react";
import ReactDOM from "react-dom";
import { App } from "spak";
import { autobind } from "core-decorators";

export default class SignIn extends React.Component {
    render() {
        return (
            <div className="sign-in">
                <form onSubmit={this._onSubmit}>
                    <div>
                        <input ref="email"
                               type="email"
                               placeholder="Email"
                        />
                        <input
                            maxLength="64"
                            ref="password"
                            type="password"
                            placeholder="Password"
                        />
                    </div>
                    <button>Sign In</button>
                </form>
            </div>
        );
    }

    @autobind
    _onSubmit(ev) {
        var email = ReactDOM.findDOMNode(this.refs.email);
        var password = ReactDOM.findDOMNode(this.refs.password);

        email.blur();
        password.blur();

        App.dispatchAction("signIn", { presenter: this });
        ev.preventDefault();
    }

    showAuthenticatedScreen() {
        window.location.hash = "dashboard";
    }
};
